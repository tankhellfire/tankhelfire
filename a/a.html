<!DOCTYPE html>
<html>
  <head> </head>
  <body>
    <div style="position: absolute; top: 20px; left: 30px">a</div>
    <script>
      let a = { state: 0, time: 0 };
      let ks = { w: a, a: a, s: a, d: a };

      window.addEventListener("keydown", (event) => {
        if (!ks[event.key]) {
          return;
        }

        if (ks[event.key].state == 0) {
          ks[event.key] = { state: 1, time: event.timeStamp };
          console.log(ks);
          return;
        }
        ks[event.key] = { state: 2, time: event.timeStamp };
      });
      window.addEventListener("keyup", (event) => {
        if (!ks[event.key]) {
          return;
        }

        ks[event.key] = { state: 0, time: event.timeStamp };
        console.log(ks);
      });

      function update() {
        // Your existing code here

        // Use requestAnimationFrame to schedule the next update
        requestAnimationFrame(update);
      }

      // Start the update loop
      update();
    </script>
  </body>
</html>
