<head>
  <title>nython</title>
  <meta name="description" content="np">
  <meta charset="utf-8">
  <meta property="og:image" content="https://cdn.discordapp.com/emojis/684135972757176353.webp">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
  <style>
    
    body, * {
      font-family: monospace;
      font-size: 14px;
      line-height: 1.4em;
    }

    button {
      width: 100%;
      height: 10%;
    }

    textarea {
      width: 100%; 
      display: block;
      height: 90%;
      background-color:#696969;
      white-space: nowrap;
      overflow-wrap: normal;
      overflow-x: scroll;
    }
    
  </style>
</head>
<body style="touch-action:manipulation;overflow:hidden;margin:0;background-color:#1E1F22;">
  <button onclick="runCode()" id="run">run</button>
  <textarea id="input">alert(1)</textarea>
  <script>

    function $(id){
      return document.getElementById(id);
    }

    function sanitizeString(str){
      return str.replaceAll('\\', '\\\\').replaceAll('\`', '\\\`').replaceAll('\$', '\\\$');
    }

    function runCode(){
      try{
        value = eval($("input").value);
        if(value){
          alert('script returned with {'+value+'}');
        }
      }catch(er){alert(er)}
    };

    function openStringAsNewTab(htmlContent){
      const newTab = window.open();
      newTab.document.write(htmlContent);
      newTab.document.close();
    }

    $("input").value=`function downloadStringAsText(content, filename){
  const blob = new Blob([content],{ type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.download = filename;
  link.href = url;
  document.body.appendChild(link);//firefox
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(url);
}
let str=\`${sanitizeString(document.documentElement.innerHTML)}\`;
openStringAsNewTab(str,'a.html');`
  </script></body>