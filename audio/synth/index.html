<!DOCTYPE html>
<html lang="en" oncontextmenu="//return false;">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>name</title>
    <script src="../../new.js"></script>
    <script src="../../lib/lib.js"></script>
    <style>
      * {
        margin: 0;
        font-family: Consolas,monospace
      }
    </style>
  </head>
  <body>
    <h1 id="statusCard">awaiting js</h1>
    <audio autoplay src="https://tankhellfire.glitch.me/ipa/list/Alveolar_nasal.ogg.mp3"></audio>
    <script>
      (async () => {
        statusCard.textContent = 'importing'
        statusCard.textContent = 'loading'
        await new Promise(resolve => setTimeout(resolve, 0));

        audioCtx=new AudioContext;
        await audioCtx.audioWorklet.addModule('audio.js');
        const workletNode = new AudioWorkletNode(audioCtx, 'main', {
          channelCount: 2,       // Set to 2 for stereo
          channelCountMode: 'explicit', // Explicitly set the number of channels
          channelInterpretation: 'speakers' // Correct interpretation for stereo output
        });

        // workletNode.port.postMessage({
        //   gain: 0.5
        // });
        // Example of sending data

        workletNode.connect(audioCtx.destination);
        
        document.addEventListener('click',e=>audioCtx.resume())

        statusCard.remove()
        clog(`%cload time: ${performance.now() / 1000}s`, "color:#0f0")
      }
      )()
    </script>
  </body>
</html>
